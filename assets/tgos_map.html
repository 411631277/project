<html> 
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>共用性網路地圖元件 - 初始化地圖</title> 
	<script type="text/javascript" src="https://api.tgos.tw/MOIMAPService/MOIMAP?APIKEY=EiWY6yNoXSkbyuKhTWu5D0kMErKGOUIrqye3XbHS/22HRoScqlSi95k+450dBjZvXgsmMI7KkY9yDqaQHlwhnP2wOSKaaH/7GwaTACJyYt+evShst0JE+WQPQMgBRcp3"></script>
   
	<script>
		let pMap;

		function InitWnd() {     //EiWY6yNoXSkbyuKhTWu5D0kMErKGOUIrqye3XbHS/22HRoScqlSi95k+450dBjZvXgsmMI7KkY9yDqaQHlwhnP2wOSKaaH/7GwaTACJyYt+evShst0JE+WQPQMgBRcp3
			var pOMap = document.getElementById("TGMap");
			pMap = new TGOS.OnlineMap(pOMap, TGOS.CoordSys.EPSG3826, { mapControl: true });

			// 讀取協作平台的 GeoJSON 主題地圖
			fetch("https://www.tgos.tw/MapSites/getGeoJson?themeid=44752")
				.then(response => response.json())
				.then(data => {
					addGeoJsonToMap(data);
				})
				.catch(error => {
					console.error("載入 GeoJSON 失敗：", error);
				});
		}

		function addGeoJsonToMap(geojson) {
			for (const feature of geojson.features) {
				const coords = feature.geometry.coordinates;
				const type = feature.geometry.type;

				if (type === "Point") {
					const point = new TGOS.TGPoint(coords[0], coords[1]);
					const marker = new TGOS.TGMarker(pMap, point, {
						title: feature.properties.name || '地點'
					});
				}
				// 你可以進一步支援 Polygon, LineString 等
			}
		}
	</script>
</head>

<body onload="InitWnd();" style="margin: 0px">
	<div id="TGMap" style="width: 100%; height: 723px;"></div>
</body>
</html>


